<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPTV M3U List</title>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const usersData = `
username1
password1
list1
--
user2
password2
list2
            `;

            function parseUsers(data) {
                const users = data.split('--').map(user => {
                    const [username, password, list] = user.trim().split('\n');
                    return { username, password, list };
                });
                return users;
            }

            function getQueryParams() {
                const params = new URLSearchParams(window.location.search);
                return {
                    user: params.get('user'),
                    pass: params.get('pass')
                };
            }

            function validateUser(users, username, password) {
                return users.find(user => user.username === username && user.password === password);
            }

            const users = parseUsers(usersData);
            const { user, pass } = getQueryParams();
            const validUser = validateUser(users, user, pass);

            if (validUser) {
                // Redirect to the M3U file
                window.location.href = `list/${validUser.list}.m3u`;
            } else {
                document.body.innerHTML = '<h1>Access Denied</h1><p>Invalid username or password.</p>';
            }
        });
    </script>
</head>
<body>
    <p>Loading...</p>
</body>
</html>
